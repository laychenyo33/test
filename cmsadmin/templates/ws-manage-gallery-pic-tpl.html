<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
{TAG_META_REFRESH}
<title> 網站管理系統</title>
    <link href="css/common.css" rel="stylesheet" type="text/css" />
    <link href="css/tabs-accordion.css" rel="stylesheet" type="text/css" />
    <script src="{TAG_ROOT_PATH}js/jquery/jquery-1.8.2.js" type="text/javascript"></script>
    <script src="js/tools.tabs-1.0.4.js" type="text/javascript"></script>
    <!-- START BLOCK : JS_JQ_UI -->
    <script src="{TAG_ROOT_PATH}js/jquery/jquery-ui-1.9.1.custom.min.js" type="text/javascript"></script>
    <link href="{TAG_ROOT_PATH}js/jquery/jquery-ui-1.9.1.custom.css" rel="stylesheet" type="text/css" />
    <!-- END BLOCK : JS_JQ_UI -->
    <!-- START BLOCK : JS_JQ_ACCORDION -->
    <script>
        (function($){
            $(document).ready(function(){
               $( "#epaper-accordion" ).accordion({
                   collapsible: true,
                   heightStyle: "content"
               });
            });
        })(jQuery);
    </script>
    <!-- END BLOCK : JS_JQ_ACCORDION -->
    <!-- START BLOCK : JS_TINYMCE -->
    <script language="javascript" type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/tiny_mce_gzip.js"></script>
    <script language="JavaScript" type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/cms_tinymce_config_gzip.js"></script>
    <script language="JavaScript" type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/cms_tinymce_config.js"></script>
    <!-- END BLOCK : JS_TINYMCE -->
    <!-- START BLOCK : JS_TINYMCE_EPAPER -->
    <script language="javascript" type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/tiny_mce.js"></script>
    <script language="JavaScript" type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/epaper_tinymce_config.js"></script>
    <!-- END BLOCK : JS_TINYMCE_EPAPER -->
    <script type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/plugins/filemanager/js/mcfilemanager.js"></script>
    <script type="text/javascript" src="{TAG_FILE_ROOT}tiny_mce/plugins/imagemanager/js/mcimagemanager.js"></script>
    <!-- START BLOCK : JS_FORMCHECK -->
    <script language="JavaScript" src="js/cms_form_check.js"></script>
    <!-- END BLOCK : JS_FORMCHECK -->
    <!-- START BLOCK : JS_PREVIEWS_PIC -->
    <script language="JavaScript" src="js/cms_preview_pic.js"></script>
    <!-- END BLOCK : JS_PREVIEWS_PIC -->
    <!-- START BLOCK : JS_MAIN -->
    <script language="JavaScript" src="js/cms_main.js"></script>
    <!-- END BLOCK : JS_MAIN -->
    <!-- START BLOCK : JS_FORMVALID -->
    <link rel="stylesheet" href="{TAG_ROOT_PATH}js/formvalid/validationEngine.jquery.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <script src="{TAG_ROOT_PATH}js/formvalid/jquery.js" type="text/javascript"></script>
    <script src="{TAG_ROOT_PATH}js/formvalid/jquery.validationEngine-cht.js" type="text/javascript"></script>
    <script>    
    (function($){
        $(document).ready(function() {
            $("#formID").validationEngine();
        });        
    })(jQuery);
    </script>
    <!-- END BLOCK : JS_FORMVALID -->
    <!-- START BLOCK : JS_CALENDAR -->
    <link type="text/css" rel="stylesheet" href="{TAG_ROOT_PATH}js/calendar/dhtmlgoodies_calendar.css" media="screen"></LINK>
    <script type="text/javascript" src="{TAG_ROOT_PATH}js/calendar/dhtmlgoodies_calendar.js"></script>
    <!-- END BLOCK : JS_CALENDAR -->
    <!-- START BLOCK : JS_TABTITLE -->
    <link rel="stylesheet" type="text/css" href="css/tabs.css" />
    <style>
        /* tab pane styling */
        div.panes > div {
            display:none;		
            padding:15px 10px;
            border:1px solid #999;
            border-top:0;
            height:auto;
            font-size:14px;
            background-color:#fff;
        }
    </style>
    <script>
    (function($){
        $(function() {     // setup ul.tabs to work as tabs for each div directly under div.panes     
            $("ul.tabs").tabss("div.panes > div");
        });        
    })(jQuery);

    </script>
    <!-- END BLOCK : JS_TABTITLE -->
    <!-- START BLOCK : JS_PIC_ACCORDION -->
    <link rel="stylesheet" type="text/css" href="css/jquery.hrzAccordion.defaults.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.hrzAccordion.examples.css">
    <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="js/jquery.hrzAccordion.js"></script>
    <script type="text/javascript" src="js/jquery.hrzAccordion.examples.js"></script>
    <!-- END BLOCK : JS_PIC_ACCORDION -->
    <!-- START BLOCK : JS_PC_TREE -->
    <link rel="stylesheet" type="text/css" href="css/pc_cate_tree.css">
    <script type="text/javascript" src="js/jquery.simple.tree.js"></script>
    <script type="text/javascript">
    var simpleTreeCollection;
    (function($){
        $(document).ready(function(){
            simpleTreeCollection = $('.simpleTree').simpleTree({
                autoclose: false,
                afterClick:function(node){
                    //alert("text-"+$('span:first',node).text());
                },
                afterDblClick:function(node){
                    //alert("text-"+$('span:first',node).text());
                },
                afterMove:function(destination, source, pos){
                    //alert("destination-"+destination.attr('id')+" source-"+source.attr('id')+" pos-"+pos);
                },
                afterAjax:function()
                {
                    //alert('Loaded');
                },
                animate:true
                //,docToFolderConvert:true
            });
        });        
    })(jQuery);
    </script>
    <!-- END BLOCK : JS_PC_TREE -->
    <style>
        span.mod{ display:inline-block;width:18px;height:18px;cursor:pointer;background:#00f;vertical-align: middle;margin:0 3px }
        span.del{ display:inline-block;width:18px;height:18px;cursor:pointer;background:#f00;vertical-align: middle;margin:0 3px }
    </style>
</head>
<body style="width:600px;">
    <form name="myform" action="gallery.php?func=gp_file&act=save" method="post">
    <div class="desc">拖曳圖片可進行排序</div>
    <div id="gallery_file_zone">
        <!-- START BLOCK : GALLERY_PICS_LIST -->
        <div class="gallery_file_list">
            <input type="hidden" name="sort[{VALUE_GP_ID}]" value="1"/>
            <div class="gallery_file"><img src="{VALUE_GP_FILE}" height="80"/></div>
            <div class="gallery_desc"><a href="#" class="mod">{VALUE_GP_DESC}</a><input type="hidden" name="all_gp_id[]" value="{VALUE_GP_ID}"/></div>
        </div>
        <!-- END BLOCK : GALLERY_PICS_LIST -->
        <div style="clear:both;" ></div>
    </div>
    <input type="submit" value="儲存"/>
    <input type="hidden" name="gc_id" value="{VALUE_GC_ID}"/>
    </form>
    <script type="text/javascript" src="../js/jquery.samesize.js"></script>
    <script type="text/javascript">
        jQuery(function($){
           $(document).ready(function(){
               $(".mod").click(function(e){
                  e.preventDefault();
                  var origin = $(this).parent();
                  var container = origin.parent();
                  var gpid = origin.find(":hidden").val();
                  if(gpid){
                      $.get("gallery.php",{ func:"ajax","act":"get_gp_file","gp_id":gpid },function(req){
                          if(req){
//                              container.append(req);
                              origin.replaceWith(req)
                          }
                      });
                  }
               });
               $("#gallery_file_zone").sortable();
               $(".gallery_file_list").samesize("height");
           });
        });
    </script>    
</body>
</html>